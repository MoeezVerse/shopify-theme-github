{% style %}
#shopify-section-{{ section.id }} .bloat-section {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  padding: {{ section.settings.section_padding }}px 20px;
  gap: 2rem;
  max-width: 1200px;
  margin: 0 auto;
}

#shopify-section-{{ section.id }} .bloat-left, 
#shopify-section-{{ section.id }} .bloat-right {
  flex: 0 1 {{ section.settings.media_width }}%;
}

#shopify-section-{{ section.id }} .bloat-left img,
#shopify-section-{{ section.id }} .bloat-left video {
  max-width: 600px;
  width: 100%;
  border-radius: {% if section.settings.enable_border_radius %}{{ section.settings.border_radius }}px{% else %}0{% endif %};
  object-fit: contain;
  display: block;
}

#shopify-section-{{ section.id }} .bloat-right .number-icon {
  width: {{ section.settings.number_icon_size }}px;
  height: {{ section.settings.number_icon_size }}px;
  background: {{ section.settings.number_icon_bg }};
  color: {{ section.settings.number_icon_color }};
  font-weight: bold;
  border-radius: 50%;
  text-align: center;
  line-height: {{ section.settings.number_icon_size }}px;
  margin-bottom: 15px;
  font-size: calc({{ section.settings.number_icon_size }}px * 0.5);
}

#shopify-section-{{ section.id }} .bloat-right h2 {
  font-size: {{ section.settings.heading_size }}px;
  font-weight: 700;
  margin-bottom: 15px;
  color: {{ section.settings.heading_color }};
  line-height: 1.3;
}

#shopify-section-{{ section.id }} .bloat-right p {
  font-size: {{ section.settings.text_size }}px;
  color: {{ section.settings.text_color }};
  margin-bottom: 20px;
  max-width: 600px;
  line-height: 1.5;
}

#shopify-section-{{ section.id }} .bloat-right a .button-text {
  background: {{ section.settings.button_bg }};
  color: {{ section.settings.button_text_color }};
  padding: {{ section.settings.button_padding }}px calc({{ section.settings.button_padding }}px * 2);
  border-radius: {{ section.settings.button_radius }}px;
  text-decoration: none;
  transition: all 0.3s ease;
  display: inline-block;
  width: 100%;
  border: 1px solid {{ section.settings.button_bg }};
  outline: none; 
  box-shadow: none; 
}

#shopify-section-{{ section.id }} .bloat-right a .button-text:hover,
#shopify-section-{{ section.id }} .bloat-right a .button-text:focus {
  background: {{ section.settings.button_hover_bg }};
  color: {{ section.settings.button_hover_text }};
  border-color: {{ section.settings.button_hover_text }};
  outline: none;
}

/* Media position swap - now scoped to this section only */
{% if section.settings.media_position == 'right' %}
  #shopify-section-{{ section.id }} .bloat-section {
    flex-direction: row-reverse;
  }
{% endif %}

/* Responsive styles */
@media (max-width: 768px) {
  #shopify-section-{{ section.id }} .bloat-section {
    flex-direction: column;
    text-align: center;
    padding: {{ section.settings.section_padding | divided_by: 2 }}px 15px;
  }
  
  #shopify-section-{{ section.id }} .bloat-left, 
  #shopify-section-{{ section.id }} .bloat-right {
    flex: 1 1 100%;
  }
  
  #shopify-section-{{ section.id }} .bloat-right .number-icon,
  #shopify-section-{{ section.id }} .bloat-right h2,
  #shopify-section-{{ section.id }} .bloat-right p {
    margin-left: auto;
    margin-right: auto;
  }
  
  #shopify-section-{{ section.id }} .bloat-right p {
    max-width: 100%;
  }
  
  {% if section.settings.media_position == 'right' %}
    #shopify-section-{{ section.id }} .bloat-section {
      flex-direction: column;
    }
  {% endif %}
}

@media (max-width: 480px) {
  #shopify-section-{{ section.id }} .bloat-right h2 {
    font-size: calc({{ section.settings.heading_size }}px * 0.8);
  }
  
  #shopify-section-{{ section.id }} .bloat-right p {
    font-size: calc({{ section.settings.text_size }}px * 0.9);
  }
  
  #shopify-section-{{ section.id }} .bloat-right a.button {
    width: 100%;
    text-align: center;
  }
}
{% endstyle %}

<div id="shopify-section-{{ section.id }}">
  <section class="bloat-section">
    <div class="bloat-left">
      {% if section.settings.left_video_url != blank %}
        <video controls muted playsinline>
          <source src="{{ section.settings.left_video_url }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      {% elsif section.settings.left_image != blank %}
        <img src="{{ section.settings.left_image | img_url:'master' }}" alt="Before and After">
      {% endif %}
    </div>
    <div class="bloat-right">
      {% if section.settings.number_icon != blank %}
        <div class="number-icon">{{ section.settings.number_icon }}</div>
      {% endif %}
      {% if section.settings.heading != blank %}
        <h2>{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.description != blank %}
        <div class="ev-product-description">
          <p>{{ section.settings.description }}</p>
        </div>
      {% endif %}
      {% if section.settings.button_text != blank %}
        <a class="ev-button" href="{{ section.settings.button_link | default: '#' }}">
          <button class="button-text" type="button">
              {{ section.settings.button_text }}
            </button>
        </a>
      {% endif %}
    </div>
  </section>
</div>