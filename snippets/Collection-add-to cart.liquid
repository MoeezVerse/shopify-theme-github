<div class="collection-cart" style="
    z-index: 9999999;
    position: relative;">
  {% for variant in product.variants %}
    <input type="hidden" id="varaintgetid" value="{{ variant.id }}">
  {% endfor %}
  <button onclick="" type="button" name="add" id="collection-cart-{{ product.id }}" >Add To cart</button>
</div>

<script>
//   function addToCart() {
//    let addCart = document.querySelectorAll('.collection-cart button');
//     alert("ok");
// }

  $(document).on('click','#collection-cart-{{ product.id }}',function(){
    let getvarintid = $(this).parents('.collection-cart').find('#varaintgetid').val();
    alert(getvarintid);

    let formobj = {
    quantity: 1,
    id : getvarintid
  };

  $.ajax({
    type: "Post",
    url: "/cart/add.js",
    cache: false,
    data: formobj,
    dataType: "json",
    success: function(data){
      console.log('success');
    },
    error : function(xhr, ajaxOption, thrownError ){
      console.log('error');
    }
  });
    
  });
  
</script>